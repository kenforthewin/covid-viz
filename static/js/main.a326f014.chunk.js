(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{113:function(e,t,a){e.exports=a(252)},118:function(e,t,a){},123:function(e,t){},125:function(e,t){},158:function(e,t){},159:function(e,t){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(103),r=a.n(l),o=a(109),s=(a(118),a(104)),i=a.n(s),u=a(108),m=a(56),d=a.n(m),h=a(274),E=a(282),f=a(277),p=a(279),x=a(281),g=a(278),b=a(276),T=a(271),F=a(272),k=a(280),y=a(270),v=a(273),S=a(283);class w extends c.a.Component{constructor(){super(),this.state={loading:!0,db:null,err:null,results:null}}componentDidMount(){i()().then(e=>{this.setState({db:new e.Database},()=>{this.syncData()})}).catch(e=>this.setState({err:e}))}syncData(){this.exec("DROP TABLE IF EXISTS covid_counties;"),this.exec("CREATE TABLE covid_counties (date TEXT, county TEXT, state TEXT, fips INTEGER, cases INTEGER, deaths INTEGER);"),u.a("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv").then(e=>{for(let a=0,n=e.length;a<n;a+=100){let t=e.slice(a,a+100).map(e=>'("'.concat(e.date,'","').concat(e.county,'","').concat(e.state,'",').concat(e.fips||0,",").concat(e.cases,",").concat(e.deaths,")")).join(",\n"),n="INSERT INTO covid_counties (date, county, state, fips, cases, deaths)\nVALUES\n".concat(t,";");this.exec(n)}this.setState({loading:!1});const t=d.a.parse(window.location.search);t.q&&this.exec(t.q)})}inputDebounce(e,t=!1){clearTimeout(this.debounce),this.debounce=setTimeout(()=>{this.exec(e,t)},500)}exec(e,t=!1){let a=null,n=null;try{a=this.state.db.exec(e)}catch(c){n=c}this.setState({results:a,err:n},()=>{if(t){let t=encodeURIComponent(e);window.history.replaceState(null,"","?q=".concat(t))}})}graphData({columns:e,values:t},a,n){if(t.length>1e4)return null;const l=e.indexOf("date");if(-1===l)return c.a.createElement("div",null,"Add a `date` and `cases` column to graph the results.");const r=e.indexOf("cases");if(-1===r)return c.a.createElement("div",null,"Add a `date` and `cases` column to graph the results.");function s(e){return e<=300?3:300<e&&e<=600?5:10}function i(e){return e<=300?2:300<e&&e<=400?5:10}const u=S.b("%Y-%m-%d"),m=e=>u(e[l]),d=e=>e[r],k=a-60-60,w=n-60-60;console.log(Object(y.a)(t,m));const A=Object(T.a)({range:[0,k],domain:Object(y.a)(t,m)}),O=Object(F.a)({range:[w,0],domain:[0,Object(v.a)(t,d)]});return c.a.createElement("svg",{width:a,height:n},c.a.createElement("rect",{x:0,y:0,width:a,height:n,fill:"#242424",rx:14}),c.a.createElement(E.a,{top:60,left:60,xScale:A,yScale:O,stroke:"rgb(102, 102, 102)",width:k,height:w,numTicksRows:s(n),numTicksColumns:i(a)}),c.a.createElement(h.a,{key:"lines-1",top:60,left:60},c.a.createElement(x.a,{data:t,x:e=>A(m(e)),y:e=>O(d(e)),stroke:"#ffffff",strokeWidth:2,curve:b.a})),c.a.createElement(h.a,{left:60},c.a.createElement(f.a,{top:60,left:0,scale:O,hideZero:!0,numTicks:s(n),label:"Cases",labelProps:{fill:"#FFF",textAnchor:"middle",fontSize:12,fontFamily:"Arial"},stroke:"#FFF",tickStroke:"#FFF",tickLabelProps:(e,t)=>({fill:"#FFF",textAnchor:"end",fontSize:10,fontFamily:"Arial",dx:"-0.25em",dy:"0.25em"}),tickComponent:e=>{let t=e.formattedValue,a=Object(o.a)(e,["formattedValue"]);return c.a.createElement("text",a,t)}}),c.a.createElement(p.a,{top:n-60,left:0,scale:A,numTicks:i(a),label:"Date"},e=>{const t=(e.axisToPoint.x-e.axisFromPoint.x)/2;return c.a.createElement("g",{className:"my-custom-bottom-axis"},e.ticks.map((t,a)=>{const n=t.to.x,l=t.to.y+10+e.tickLength;return c.a.createElement(h.a,{key:"vx-tick-".concat(t.value,"-").concat(a),className:"vx-axis-tick"},c.a.createElement(g.a,{from:t.from,to:t.to,stroke:"#FFF"}),c.a.createElement("text",{transform:"translate(".concat(n,", ").concat(l,") rotate(").concat(45,")"),fontSize:10,textAnchor:"middle",fill:"#FFF"},t.formattedValue))}),c.a.createElement("text",{textAnchor:"middle",transform:"translate(".concat(t,", 50)"),fontSize:"8"},e.label))})))}renderResult({columns:e,values:t}){let a=!1,n=t.length;return t.length>1e3&&(a=!0,t=t.slice(0,1e3)),c.a.createElement("div",null,a&&c.a.createElement("div",null,"truncated: 1,000 of ".concat(n," shown and graph skipped.")),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,e.map(e=>c.a.createElement("td",null,e)))),c.a.createElement("tbody",null,t.map(e=>c.a.createElement("tr",null,e.map(e=>c.a.createElement("td",null,e)))))))}render(){let e=this.state,t=(e.db,e.err),a=e.results,n=e.loading;const l=d.a.parse(window.location.search);return n?c.a.createElement("pre",null,"Loading..."):c.a.createElement("div",{className:"App"},c.a.createElement("textarea",{rows:3,defaultValue:l.q,onChange:e=>this.inputDebounce(e.target.value,!0),placeholder:"Enter some SQL. Try \u201cSELECT * FROM covid_counties;\u201d"}),c.a.createElement("pre",{className:"error"},(t||"").toString()),a&&c.a.createElement(k.a,{className:"graph-container"},({width:e,height:t})=>a.map(t=>this.graphData(t,e,500))),c.a.createElement("pre",null,a?a.map(this.renderResult):""))}}const A=document.getElementById("root");r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),A)}},[[113,1,2]]]);
//# sourceMappingURL=main.a326f014.chunk.js.map