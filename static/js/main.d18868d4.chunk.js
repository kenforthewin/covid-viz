(this["webpackJsonpreact-sqljs-demo"]=this["webpackJsonpreact-sqljs-demo"]||[]).push([[0],{130:function(e,t){},131:function(e,t){},180:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),s=n(82),l=n.n(s),o=(n(90),n(83)),r=n.n(o),i=n(84),u=n(41),d=n.n(u);class E extends c.a.Component{constructor(){super(),this.state={loading:!0,db:null,err:null,results:null}}componentDidMount(){r()().then(e=>{this.setState({db:new e.Database},()=>{this.syncData()})}).catch(e=>this.setState({err:e}))}syncData(){this.exec("DROP TABLE IF EXISTS covid_counties;"),this.exec("CREATE TABLE covid_counties (date TEXT, county TEXT, state TEXT, fips INTEGER, cases INTEGER, deaths INTEGER);"),i.a("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv").then(e=>{for(let n=0,a=e.length;n<a;n+=100){let t=e.slice(n,n+100).map(e=>'("'.concat(e.date,'","').concat(e.county,'","').concat(e.state,'",').concat(e.fips,",").concat(e.cases,",").concat(e.deaths,")")).join(",\n"),a="INSERT INTO covid_counties (date, county, state, fips, cases, deaths)\nVALUES\n".concat(t,";");this.exec(a)}this.setState({loading:!1});const t=d.a.parse(window.location.search);t.q&&this.exec(t.q)})}exec(e,t=!1){let n=null,a=null;try{n=this.state.db.exec(e)}catch(c){a=c}this.setState({results:n,err:a},()=>{if(t){let t=encodeURIComponent(e);window.history.replaceState(null,"","?q=".concat(t))}})}renderResult({columns:e,values:t}){return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,e.map(e=>c.a.createElement("td",null,e)))),c.a.createElement("tbody",null,t.map(e=>c.a.createElement("tr",null,e.map(e=>c.a.createElement("td",null,e))))))}render(){let e=this.state,t=(e.db,e.err),n=e.results,a=e.loading;const s=d.a.parse(window.location.search);return a?c.a.createElement("pre",null,"Loading..."):c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"Covid SQL"),c.a.createElement("textarea",{defaultValue:s.q,onChange:e=>this.exec(e.target.value,!0),placeholder:"Enter some SQL. Try \u201cSELECT * FROM covid_counties;\u201d"}),c.a.createElement("pre",{className:"error"},(t||"").toString()),c.a.createElement("pre",null,n?n.map(this.renderResult):""))}}const h=document.getElementById("root");l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(E,null)),h)},85:function(e,t,n){e.exports=n(180)},90:function(e,t,n){},95:function(e,t){},97:function(e,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.d18868d4.chunk.js.map